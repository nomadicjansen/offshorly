<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../assets/style.css?t=615badd5">
    <script src="../assets/script.js?t=42463e55"></script>
    <title>NodeJs - 7 Eleven CliQQ Docs</title>
    <meta name="viewport" content="width=device-width">
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="menu toc-menu">
        <li class="menu-item -level-0 -parent">
          <ul class="submenu">
            <li class="menu-item -level-1"><a class="link title  link-index" href="../index.html">7 Eleven CliQQ Docs</a>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title  link-general" href="../general/index.html">General</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-generalintroduction" href="../general/introduction.html">Introduction</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-generaldeployment" href="../general/deployment.html">Deployment</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-generalpwa" href="../general/pwa.html">PWA</a>
                </li>
                <li class="menu-item -level-2"><a class="link title -active link-generalnode" href="../general/node.html">NodeJs</a>
                  <ul class="headings heading-list">
                    <li class="heading-item -depth-2"><a class="hlink link-specify-engines-key-in-package.json" href="#specify-engines-key-in-package.json">Specify `engines` key in `package.json`</a>
                    </li>
                    <li class="heading-item -depth-2"><a class="hlink link-use-a-smart-.npmrc" href="#use-a-smart-.npmrc">Use a smart `.npmrc`</a>
                    </li>
                    <li class="heading-item -depth-2"><a class="hlink link-hop-on-the-es6-train" href="#hop-on-the-es6-train">Hop on the ES6 train</a>
                    </li>
                    <li class="heading-item -depth-2"><a class="hlink link-stick-with-lower-case" href="#stick-with-lower-case">Stick with lower case</a>
                    </li>
                    <li class="heading-item -depth-2"><a class="hlink link-cluster-your-app" href="#cluster-your-app">Cluster your app</a>
                    </li>
                    <li class="heading-item -depth-2"><a class="hlink link-be-environmentally-aware" href="#be-environmentally-aware">Be environmentally aware</a>
                    </li>
                    <li class="heading-item -depth-2"><a class="hlink link-reference:" href="#reference:">Reference:</a>
                    </li>
                  </ul>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-generalcommands" href="../general/commands.html">CLI Commands</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-generalfiles" href="../general/files.html">Tool Configuration</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-generalserver-configs" href="../general/server-configs.html">Server Configurations</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-generalfaq" href="../general/faq.html">FAQ</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-generalgotchas" href="../general/gotchas.html">Gotchas</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-generalremove" href="../general/remove.html">Remove</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">Code Style Guides</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-styleguidesjs" href="../styleguides/js.html">JavaScript</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-styleguidescss" href="../styleguides/css.html">CSS</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-styleguidesreact" href="../styleguides/react.html">React</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">Contributing Code</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-gitgithub-flow" href="../git/github-flow.html">GitHub Flow</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-gitdeployment" href="../git/deployment.html">Deployment</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title  link-testing" href="../testing/index.html">Testing</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-testingunit-testing" href="../testing/unit-testing.html">Unit Testing</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-testingcomponent-testing" href="../testing/component-testing.html">Component Testing</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-testingremote-testing" href="../testing/remote-testing.html">Remote Testing</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title  link-css" href="../css/index.html">CSS</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-cssstyled-components" href="../css/styled-components.html">Styled Component</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-semantic" href="../semantic/index.html">Semantic Theme</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-csssanitize" href="../css/sanitize.html">Sanitize.css</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-csssass" href="../css/sass.html">Using Sass</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-cssremove" href="../css/remove.html">Remove</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title  link-js" href="../js/index.html">JS</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-jsredux" href="../js/redux.html">Redux</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-jsimmutablejs" href="../js/immutablejs.html">ImmutableJS</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-jsreselect" href="../js/reselect.html">reselect</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-jsredux-saga" href="../js/redux-saga.html">redux-saga</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-jsi18n" href="../js/i18n.html">i18n</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-jsrouting" href="../js/routing.html">routing</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-jsremove" href="../js/remove.html">Remove</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </div>
      <div class="body page-generalnode">
        <div class="header-nav">
          <div class="right">
          </div>
        </div>
        <div class="markdown-body"><h1 id="node.js-best-practices">Node.js  Best Practices</h1>
<h2 id="specify-engines-key-in-package.json">Specify <code>engines</code> key in <code>package.json</code></h2>
<p>The first thing you should do is specify an <code>engines</code> key with your current version of node (node -v):</p>
<pre><code>&quot;engines&quot;: {
  &quot;node&quot;: &quot;7.6.0&quot;
}
</code></pre>
<h2 id="use-a-smart-.npmrc">Use a smart <code>.npmrc</code></h2>
<p>By default, npm doesn&#x2019;t save installed dependencies to package.json (and you should always track your dependencies!).</p>
<p>If you use the --save flag to auto-update <code>package.json</code>, npm installs the packages with a leading carat (^), putting your modules at risk of drifting to different versions. This is fine for module development, but not good for apps, where you want to keep consistent dependencies between all your environments.</p>
<p>One solution is installing packages like this:</p>
<pre><code>npm install foobar --save --save-exact
</code></pre>
<p>Even better, you can set these options in <code>~/.npmrc</code> to update your defaults:</p>
<pre><code class="lang-bash">$ npm config <span class="pl-c1">set</span> save=<span class="pl-c1">true</span>
$ npm config <span class="pl-c1">set</span> save-exact=<span class="pl-c1">true</span>
$ cat ~/.npmrc
</code></pre>
<p>Now, <code>npm install foobar</code> will automatically add <code>foobar</code> to <code>package.json</code> and your dependencies won&#x2019;t drift between installs.</p>
<p>You can lock down your dependencies further with <code>npm-shrinkwrap</code>. However, note that the shrinkwrap workflow can be counterintuitive, and shrinkwrap has several known issues in older versions of npm.</p>
<h2 id="hop-on-the-es6-train">Hop on the ES6 train</h2>
<p>Node 4+ packs an updated V8 engine with several useful ES6 features. Don&#x2019;t be intimidated by some of the more complex stuff, you can learn it as you go. There are plenty of simple improvements for immediate gratification:</p>
<pre><code class="lang-js"><span class="pl-k">let</span> user = users.find(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.id === ID);

<span class="pl-c1">console</span>.log(<span class="pl-s">`Hello, <span class="hljs-subst">${ user.name }</span>!`</span>);
</code></pre>
<h2 id="stick-with-lower-case">Stick with lower case</h2>
<p>Some languages encourage filenames that match class names, like <code>MyClass</code> and <code>MyClass.js</code>. Don&#x2019;t do that in Node. Instead, use lowercase files:</p>
<pre><code>let MyClass = require(&apos;my-class&apos;);
</code></pre>
<p>Node.js is the rare example of a Linux-centric tool with great cross-platform support. While OSX and Windows will treat &apos;myclass.js&#x2019; and &apos;MyClass.js&#x2019; equivalently, Linux won&#x2019;t. To write code that&#x2019;s portable between platforms, you&#x2019;ll need to exactly match require statements, including capitalization.</p>
<p>The easy way to get this right is to just stick with lowercase filenames for everything, eg <code>my-class.js</code>.</p>
<h2 id="cluster-your-app">Cluster your app</h2>
<p>Since the node runtime is limited to a single CPU core and about 1.5 GB of memory, deploying a non-clustered node app on a large server is a huge waste of resources.
To take advantage of multiple cores and memory beyond 1.5 GB, bake Cluster support into your app. Even if you&#x2019;re only running a single process on small hardware today, Cluster gives you easy flexibility for the future.</p>
<p>Testing is the best way to determine the ideal number of clustered processes for your app, but it&#x2019;s good to start with the reasonable defaults offered by your platform, with a simple fallback, eg:</p>
<pre><code>const CONCURRENCY = process.env.WEB_CONCURRENCY || 1;
</code></pre>
<p>Choose a <a href="https://www.npmjs.com/search?q=cluster">Cluster abstraction</a> to avoid reinventing the wheel of process management. If you&#x2019;d like separate master and worker files, you can try <a href="https://www.npmjs.com/package/forky">forky</a>. If you prefer a single entrypoint file and function, take a look at <a href="https://www.npmjs.com/package/throng">throng</a>.</p>
<h2 id="be-environmentally-aware">Be environmentally aware</h2>
<p>Don&#x2019;t litter your project with environment-specific config files! Instead, take advantage of environment variables.</p>
<p>First, install node-foreman:</p>
<h2 id="reference:">Reference:</h2>
<p><a href="https://devcenter.heroku.com/articles/node-best-practices">Best Practices for Node.js Development</a></p>

        </div>
        <div class="footer-nav">
          <div class="left"><a href="../general/pwa.html"><span class="title">PWA</span></a></div>
          <div class="right"><a href="../general/commands.html"><span class="label">Next: </span><span class="title">CLI Commands</span></a></div>
        </div>
      </div>
    </div>
  </body>
</html>